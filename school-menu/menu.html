<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>학교급식정보</title>
</head>

<body>
    <h3>학교급식정보</h3>
    <div id="todayMenu"></div>
    <script>
        let dateData = new Date().toISOString().slice(0, 10); // 2024-05-07
        dateData = dateData.replace(/-/g, "");

        fetch(`https://open.neis.go.kr/hub/mealServiceDietInfo?Type=json&pIndex=1&pSize=100&ATPT_OFCDC_SC_CODE=B10&SD_SCHUL_CODE=7011569&MLSV_YMD=${dateData}`)
            .then((response) => response.json())
            .then((data) => {
                console.log("data : ", data);

                if (data.mealServiceDietInfo) {
                    const menuInfo = data.mealServiceDietInfo[1].row;
                    menuInfo.forEach(function (menu) {
                        document.getElementById("todayMenu").innerHTML += `${menuInfo[0]}`;
                    });
                    document.getElementById("todayMenu").innerHTML =
                        `<h3>[ ${data.mealServiceDietInfo[1].row[0].MMEAL_SC_NM} ]</h3>`
                        + `${data.mealServiceDietInfo[1].row[0].DDISH_NM}`;
                } else {
                    document.getElementById("todayMenu").innerHTML = `급식메뉴를 불러오지 못했습니다.`;
                }
                console.log(data.mealServiceDietInfo[1]);
            })
    </script>

</body>

</html>